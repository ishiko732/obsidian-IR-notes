---
tags: 计算机组成原理 [obsidian] 
cards-deck: 考研::计算机组成原理
---
I/O接口(I/O控制器)
	1.I/O接口的功能和基本结构
	2.I/O端口及其编址
1.程序查询方式
2.程序中断方式
	中断的基本概念，中断响应过程，中断处理过程，多重中断和中断屏蔽的概念。
3.DMA方式
	DMA控制器的组成，DMA传送过程。


运行基准程序耗费的总时间=? :: CPU时间+I/O时间 ^1669122735763


# I/O接口
I/O可以作为一个==转换==器
^1669122735772
==I/O接口==保证了外部设备用计算机特性所要求的形式发送或接收信息
^1669122735776

CPU访问端口,有2种不同的编址方式,一种是==统一编址==方式,一种是==I/O独立==编址方式
^1669122735779
I/O接口编址方式种,哪个是通过地址码来区分的? :: 统一编址 ^1669122735783
I/O接口编址方式种,哪个是通过指令来区分的? :: I/O独立编址 ^1669122735786

# 程序查询方式
![[Pasted image 20221122203750.png]]
#card-spaced 
^1669122735790

![[Pasted image 20221122210024.png]]

程序查询方式可以分为: ==独占==查询和==定时==查询
^1669123266134

# 程序中断方式
转移到中断服务程序的请求是来自==外部设备==发出的
^1669215327089

![[Pasted image 20221122214010.png]]

![[Pasted image 20221122214230.png]]
#card-spaced 
^1669215327108

![[Pasted image 20221122215202.png]]

中断处理的隐指令的作用是? #card 
1. 保存原程序的PC的值
2. 将PC指向中断服务程序的第一条指令
^1669215327112

什么东西指向中断服务程序的入口地址? :: 中断向量 ^1669215327115
什么东西指向中断服务程序的跳转地址? :: 中断地址 ^1669215327118
引起中断事件的被称为==中断源==
^1669215327121

在中断处理过程中的“保护现场”步骤进行的？

除法错中断可以通过软件方法屏蔽? :: 错误 ^1669294197776


## 单重/多重中断
![[Pasted image 20221122220709.png]]

单重中断允许其他中断源打断中断服务程序? :: 错误 ^1669215327124
单重中断在中断服务程序会保护现场和屏蔽字? :: 错误,多重才是;单重只会保护现场不会保存屏蔽字 ^1669215327127

多重中断允许优先权高的中断级打断优先权低的中断服务程序? :: 正确 ^1669215327130


![[Pasted image 20221122221216.png]]

中断屏蔽字IM设置==1==表示屏蔽,设置==0==表示开放
^1669215327133
中断屏蔽字IM设置==0==可以使更高级的中断屏蔽触发器以此来实现正常的中断嵌套
^1669215327135
在中断情况下,CPU和设备的优先级如何考虑? :: CPU优先级最低 ^1669215327138
若采用二维中断屏蔽字IM,IM设置为1表示屏蔽==本级==和==优先级低于本级的中断屏蔽触发器==,(提示![[Pasted image 20221123224540.png]])
^1669215327141


若采用二维中断,能否用IM(中断屏蔽字)对某个优先级的个别设备进行单独屏蔽? :: 不能 ^1669215327144

若采用二维中断,用什么对某个优先级的个别设备进行单独屏蔽? :: 利用EI(中断允许触发器)置0,表示禁止设备发出中断请求 ^1669215327147

如何求中断极限频率? #card 
中断极限频率$f=\frac{1}{T}$
其中T为各个中断服务设备花费的时间
![[Pasted image 20221123225513.png]]
^1669215327149



![[Pasted image 20221122221523.png]]
![[Pasted image 20221122222233.png]]

![[Pasted image 20221122223134.png]]


# DMA方式

DMA方式一般用于==高速传送成组==数据
^1669260455233
DMA方式以响应==随机==请求方式,实现主存与I/O设备间的快速数据传送
^1669260455237
DMA控制器只负责==数据传送==工作
^1669260455240

DMA传送方式有哪几种? #card 
- 成组连续传送方式
- 周期挪用方式
- 透明DMA方式
^1669260455243



![[Pasted image 20221123195058.png]]



![[Pasted image 20221123200436.png]]


DMA的成组连续传送方式能够充分发挥CPU对主存的利用率? :: 错误![[Pasted image 20221124110552.png]] ^1669260455246

DMA周期挪用方式当CPU不需要访存时有I/O请求,需要暂停CPU操作给I/O请求? :: 错误,CPU没有访存时,不需要空出总线给I/O ^1669260455252

DMA周期挪用方式当CPU访存,有I/O请求也要访存,需要暂停CPU操作给I/O请求? :: 正确,I/O设备优先 ^1669260455256

为什么DMA方式有访存冲突时,要I/O设备访内优先? :: 因为I/O访问有时间要求,前一个I/O数据必须在下一个访内请求到来之前存取完毕![[Pasted image 20221124111921.png]] ^1669260455259

如果CPU工作周期比内存存取周期长很多,则应该采用什么方式来使DMA传送和CPU同时发挥做高的效率? :: 透明DMA方式(DMA与CPU交替访存)![[Pasted image 20221124111912.png]] ^1669260455262

![[Pasted image 20221123200625.png]]

采用DMA方式可以使I/O与主机==并==行工作,程序和传送==并==行工作
^1669260455266


## DMA控制器
![[Pasted image 20221124112325.png]]

DMA控制器中,内存地址计数器的作用是? :: 用于存放内存中要交换数据的地址 ^1669260455269
DMA控制器中,字计数器的作用是? :: 用于记录传送数据块的长度(多少字数) ^1669260455272
DMA控制器中,交换的字通常是以==补==码表示
^1669260455275
在DMA传送时,每传送一个字,字计数器==+==1,当计数器溢出时即最高位产生进位时,表示==这批数据传送完毕==
^1669260455277
在DMA传送中,当数据传送完毕以后,由==溢出==信号引起DMA控制向CPU发==中断信号==
^1669260455280
在DMA传送中,数据缓冲寄存器的作用是? :: 用于暂存每次传送的数据(一个字) ^1669265582922

DMA的数据传送是以==数据块==为基本单位进行的
^1669265582931


![[Pasted image 20221123200922.png]]

中断请求是在什么时候开始响应? :: 指令**执行周期**结束后 ^1669260455283
DMA请求是在什么时候开始响应? :: 每个**机器周期**结束后 ^1669260455286


DMA控制器按其组成结构,可分为==选择==型和==多路==型
^1669294197783
选择型DMA控制器在某一段时间内只能为一个设备服务? :: 正确 ^1669272136006
选择型DMA控制器适用于慢速设备? :: 错误,多路选择才是 ^1669272136012

多路型 DMA 不仅在物理上可以连接多个外围设备，而且在逻辑上也允许这些外围设备同时工作? :: 正确 ^1669272136015

多路型 DMA 中，各设备以==字节交叉==方式通过 DMA 控制器进行数据传送。
^1669272136019

# 通用I/O标准接口
==SCSI==是小型计算机系统接口
^1669288134344

(P271)SCSI是==系统==级接口,是处于主适配器和智能设备控制器之间的==并==行I/O接口
^1669288134353

I/O系统设计主要考虑2种规范是:==时延==约束和==带宽==约束
^1669288134356

时延约束是确保完成一次I/O操作的延迟时间被限制在某个数据范围内


# 题目
下列陈述中正确的是( )。 A．在DMA周期内，CPU不能执行程序。 B．中断发生时，CPU首先执行人栈指令将程序计数器的内容保护起来。 C．DMA传送方式中，DMAC每传送一个数据就窃取一个指令周期。 D．输入输出操作的最终目的是要实现CPU与外设之间的数据传输。
	正确答案：D 
	解析：
	A错，DMA周期内CPU仍然可以执行程序。
	B错，对于单重中断发生时首先执行中断周期，其顺序为中断响应、关中断、程序断点(PC)进栈、向量地址送PC。


在中断处理过程中,“保存现场”需要将中断服务程序中要使用的寄存器压入堆栈? :: 正确 ^1669294197787
在中断处理过程中,“保存现场”需要将标志寄存器压入堆栈? :: 正确 ^1669294197792

在中断处理过程中,“恢复现场”需要执行中断返回指令? :: 正确 ^1669294197794
在中断处理过程中,“恢复现场”需要将中断服务程序中要使用的寄存器压入堆栈? :: 错误,是弹出 ^1669294197797
在中断处理过程中,“恢复现场”需要将将标志寄存器弹出堆栈? :: 正确 ^1669294197801

![[Pasted image 20221124204945.png]]:: 35162 ^1669294197805


某机器CPU中有16个通用寄存器，运行某中断处理程序时仅用到其中2个寄存器，请问响应中断而进人该中断处理程序时是否要将通用寄存器内容保存到主存中去?需保存几个寄存器? #card
	【答】 响应中断而进入该中断处理程序时，需将**通用寄存器内容保存到主存中去**，但为减少中断处理时间，不必保存所有通用寄存器内容，这里只需**将2个中断处理程序中用到的寄存器内容保存起来**。
^1669338669896


如果认为 CPU 等待设备的状态信号是处于非工作状态(即踏步等待)，那么在==程序查询==方式主机与设备是串行工作的
^1669338669923
如果认为 CPU 等待设备的状态信号是处于非工作状态(即踏步等待)，那么在==程序中断==方式主机与设备是并行工作的
^1669338669927
如果认为 CPU 等待设备的状态信号是处于非工作状态(即踏步等待)，那么在==DMA==方式主程序与设备是并行工作的
^1669338669930

中断向量地址是==中断服务程序入口==地址
^1669338669935

利用微型机制作了对输入数据进行采样处理的系统。在该系统中，每抽取一个输入数据就要中断 CPU 一次，中断处理程序接收采样的数据，将其放到主存的缓冲区内。该中断处理需时 x 秒，另一方面 缓冲区内每存储 n 个数据，主程序就将其取出进行处理，这种处理需时 y 秒。因此该系统可以跟踪到每秒==$n/(n\times x+y)$==次的中断请求。
^1669338669940

采用 DMA 方式传送数据时，每传送一个数据就要占用一个==存储==周期的时间。
^1669338669943


中断发生时，CPU 首先执行入栈指令将程序计数器内容保护起来? :: 错误,先中断响应,关中断,程序断点(PC进栈),向量地址送PC ^1669338669946
输入输出操作的最终目的是要实现 CPU 与外设之间的数据传输? :: 正确 ^1669338669949
在DMA周期内，CPU不能执行程序? :: 错误,可以执行程序 ^1669338669952


Pentium系统有两类中断源:1.由CPU外部的硬件信号引发的称为==中断==,它可以分为可屏蔽==中断==和非屏蔽==中断==
^1669338669956
Pentium系统有两类中断源:1.由指令引发的称为异常，其中一种是执行==异常==，另一种是执行==软件中断指令==
^1669338669959

IEEE 1394是==串==行I/O标准接口，与SCSI==并==行I/O标准接口相比，它具有更高的==数据传输速率==，更强的==数据传输实时性== ，体积==小==，连接方便。
^1669338669962
SCSI 是系统级==接口==，是处于主适配器和智能设备控制器之间的==并==行I/O 接口。SCSI-3 标准允许SCSI 总线上连接的设备由==8==个提高到==16==个，可支持==16==位数据传输。
^1669338669965


比较通道、DMA、中断三种基本I/O方式的异同点。
	通道方式
	利用通道来管理外设的工作，可以实现对外设的统一管理和外设与内存之间的数据传送，减轻了CPU的负担，大大提高了CPU的工作效率。
	DMA方式
	需要硬件DMAC的控制管理主存与高速外设之间大批数据交换；
	数据传送速度很高，传送速率仅受到内存访问时间的限制。
	中断方式
	一般适用于随机出现的慢速外设的数据传送服务；
	一旦提出请求应立即进行，节省了CPU的时间开销，但硬件结构稍复杂一些。

通道方式的特点是? #card 
利用通道来管理外设的工作，可以实现对外设的统一管理和外设与内存之间的数据传送，减轻了CPU的负担，大大提高了CPU的工作效率。
^1669338669968

DMA方式的特点是? #card 
- 需要硬件DMAC的控制管理主存与高速外设之间大批数据交换；
- 数据传送速度很高，传送速率仅受到内存访问时间的限制。
^1669338669972

中断方式的特点是? #card 
- 一般适用于随机出现的慢速外设的数据传送服务；
- 一旦提出请求应立即进行，节省了CPU的时间开销，但硬件结构稍复杂一些。
^1669338669975

中断向量= ==中断向量地址==
^1669338669978
在中断系统中,CPU一旦响应中断,则立即关闭==中断屏蔽==标志,以防止本次中断响应过程被其他中断源产生另一次中断干扰
^1669338669982
CPU输出的数据速度远远高于打印机的打印速度,为解决这个矛盾,可以采用==缓冲==技术
^1669338669985
CPU对通道请求的形式是==I/O指令==
^1669338669988
CPU对外设的选择是基于设备编址? :: 正确 ^1669338669991
SCSI总线采用==菊花链==(集中式总裁之一)形式
^1669338669994
通道的功能是? :: 组织外围设备和内存进行数据传输 ^1669338669999
通道可分为:选择通道和==多路==通道
^1669338670002
