集群部署注意
![[Pasted image 20220121105906.png]]
![[Pasted image 20220121110004.png]]
           
           

**1**）Hadoop集群启停脚本（包含HDFS，Yarn，Historyserver）：myhadoop.sh

```shell
[atguigu@hadoop102 ~]$ cd /home/atguigu/bin

[atguigu@hadoop102 bin]$ vim myhadoop.sh
```

```shell
           

#!/bin/bash

if [ $# -lt 1 ]

then

 echo "No Args Input..."

 exit ;

fi

case $1 in

"start")

 echo " =================== 启动 hadoop集群 ==================="

 echo " --------------- 启动 hdfs ---------------"

 ssh hadoop102 "/opt/module/hadoop-3.1.3/sbin/start-dfs.sh"

 echo " --------------- 启动 yarn ---------------"

 ssh hadoop103 "/opt/module/hadoop-3.1.3/sbin/start-yarn.sh"

 echo " --------------- 启动 historyserver ---------------"

 ssh hadoop102 "/opt/module/hadoop-3.1.3/bin/mapred --daemon start historyserver"

;;

"stop")

 echo " =================== 关闭 hadoop集群 ==================="

 echo " --------------- 关闭 historyserver ---------------"

 ssh hadoop102 "/opt/module/hadoop-3.1.3/bin/mapred --daemon stop historyserver"

 echo " --------------- 关闭 yarn ---------------"

 ssh hadoop103 "/opt/module/hadoop-3.1.3/sbin/stop-yarn.sh"

 echo " --------------- 关闭 hdfs ---------------"

 ssh hadoop102 "/opt/module/hadoop-3.1.3/sbin/stop-dfs.sh"

;;

*)

 echo "Input Args Error..."

;;

esac

```
保存后退出，然后赋予脚本执行权限

```shell
[atguigu@hadoop102 bin]$ chmod +x myhadoop.sh
```