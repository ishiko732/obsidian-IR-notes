
---
tags: 计算机网络 [obsidian]
cards-deck: FSRS::计算机网络
---


动态主机配置协议DHCP可为计算机自动配置网络参数，使得计算机“即插即联网”（Plug-and-Play Networking）。DHCP目前是因特网草案标准`[RFC 2131，RFC 2132]`。
![[Pasted image 20230401143057.png]]

![[Pasted image 20230401143111.png]]

DHCP服务器使用的==UDP==端口号为==67==
^1680331055334
DHCP客户端使用的==UDP==端口号为==68==
^1680331055342

使用ARP确保所选IP地址未被网络中其他主机占用
使用ARP检测所分配到的IP地址是否已被网络中其他主机占用：
- 若是，则发送DHCP谢绝报文，并重新发送DHCP发现报文；
- 否则，可以使用租约中的IP地址与网络中其他主机通信了。


DHCP如何确保所选IP地址未被其他主机占用？::使用ARP检测。 ^1680331055348
DHCP如何检测所分配到的IP地址是否已被其他主机占用？::使用ARP。 ^1680331055352
当DHCP发现所选IP地址已被其他主机占用时，会发送什么报文？::DHCP谢绝报文。 ^1680331055357
当DHCP发现所选IP地址已被其他主机占用时，会怎么做？::重新发送DHCP发现报文。 ^1680331055361
当DHCP发现所选IP地址未被其他主机占用时，可以和网络中其他主机进行什么操作？::可以使用租约中的IP地址进行通信。 ^1680331055366


寻找DHCP服务器,DHCP客户的IP地址是多少,目的IP地址是多少? :: 源地址:0.0.0.0, 目的IP地址:255.255.255.255(广播地址) ^1680331567082
当DHCP服务器为客户提供IP地址时,IP地址是多少,目的IP地址是多少? :: 源地址:DHCP服务器地址,目的IP地址:255.255.255.255 ^1680331567087
当DHCP客户端接收了IP地址以后,发送的UDP报文段的目的IP地址是多少? :: 255.255.255.255 ^1680331567091
当确认IP地址租约的时候,源IP地址是多少,目的IP地址是多少? :: 源地址:DHCP服务器地址,目的IP地址:255.255.255.255 ^1680331567096
当DHCP客户的IP地址租约达到0.5倍租用期时,向DHCP服务器请求新的租用IP地址,若DHCP服务器**拒绝了**客户请求,客户应该如何操作? :: 立即停止使用当前的IP地址,并重新发送DHCP发现报文 ^1680331567100
当DHCP客户的IP地址租约达到0.5倍租用期时,向DHCP服务器请求新的租用IP地址,若DHCP服务器**未响应**客户请求,客户应该如何操作? :: 当到0.875倍租用期时,再次发送DHCP请求报文 ^1680331567104
释放DHCP租用的IP地址时,源IP地址是多少,目的IP地址是多少? :: 源地址:0.0.0.0,目的IP地址:255.255.255.255 ^1680331567108


## DHCP中继代理
![[Pasted image 20230401143450.png]]
各主机是否可以通过DHCP来自动获取网络配置参数呢？
答案是否定的。原因很简单：该网络中的主机广播发送DHICP发现报文，但该广播报文不会被路由器转发，而是被丢弃！
解决上述问题的方法：给该路由器配置DHCP服务器的IP地址并使之成为DHCP中继
代理，如图6-8所示。这样，该网络中的各主机就可以通过DHICP来自动获取到网络配置参数了。当成为DHCP中继代理的路由器收到广播的DHCP发现报文后，会将其单搔转发给
DHCP服务器。DHCP客户和DHCP服务器通过DHICP中继代理的后续交互过程就不资达了。


各主机能否通过DHCP自动获取网络配置参数？::可以,但是如果经过路由器则不行,因为路由器会丢弃广播报文。 ^1680331055371
如何解决各主机经过路由器不能通过DHCP自动获取网络配置参数的问题？::给该路由器配置DHCP服务器的IP地址并使之成为DHCP中继代理。 ^1680331055375
如何配置DHCP中继代理？::将路由器配置为DHCP中继代理。 ^1680331055383
DHCP中继代理如何处理收到的DHCP发现报文？::将其单独转发给DHCP服务器。 ^1680331055387
通过DHCP中继代理后续交互的过程会有影响吗？::不会影响DHCP客户和DHCP服务器的交互过程。 ^1680331055393
