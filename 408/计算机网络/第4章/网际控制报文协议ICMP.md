---
tags: 计算机网络  [obsidian]
cards-deck: 考研::计算机网络
---

# 网际控制报文协议ICMP
![[Pasted image 20211021153510.png]]

ICMP报文封装在哪？ #card 
IP数据报
^1634803294218

ICMP的差错报告有哪几种？ #card 
- 终点不可达
- 源点抑制
- 时间超过
- 参数问题
- 改变路由（重定向）
^1634803294224


![[Pasted image 20211021160028.png]]
当路由器或主机**不能交付数据报**时，向源点发送==终点不可达==报文 
^1663690256009

![[Pasted image 20211021160336.png]]
当路由器或主机**由于拥塞而丢弃数据报**时，向源点发送==源点抑制==报文
^1663690256012
![[Pasted image 20211021160434.png]]
当路由器或主机由于TTL字段值为0而丢弃数据报时，向源点发送==时间(超时)超过==报文
^1663477258245
![[Pasted image 20211021160625.png]]
当路由器或目的主机收到数据报后，{2:首部检验和}发现出现了误码而丢弃数据报时，向源点发送==参数问题==报文 
^1663477249621

![[Pasted image 20211021160724.png]]
当路由器把==改变路由==报文发送给主机,让主机知道下次应将数据报发送给另外的路由器,这样可以通过更好的路由到达目的主机 
^1663690256017


![[Pasted image 20211021160738.png]]

什么时候不发送ICMP差错报告报文？ 
- 对ICMP差错报告报文不发送ICMP差错报告报文
- 对除了第一个分片以外的分片不发送ICMP差错报告报文
- 对多播地址不发送ICMP差错报告报文
- 对特殊地址（127.0.0.0/ 0.0.0.0）不发送ICMP差错报告报文

对ICMP差错报告报文出错时,发送ICMP差错报告报文?:: 错误,不发送 ^1663477263219

对除了第一个分片以外的分片出错时,不发送ICMP差错报告报文? :: 正确 ^1663477263224
对于发送的目的地址为多播地址的IP数据报,如果出错了发送ICMP差错报告报文吗? :: 不会,多播地址的IP数据报不发送ICMP差错报文 ^1663477249635
对于发送的目的地址为特殊地址的IP数据报,如果出错了发送ICMP差错报告报文吗?::不会 ^1663689840789
对于发送的目的地址为127.0.0.0的IP数据报,如果出错了发送ICMP差错报告报文吗? :: 不会 ^1663477263229
对于发送的目的地址为0.0.0.0的IP数据报,如果出错了发送ICMP差错报告报文吗? :: 不会 ^1663477249645

![[Pasted image 20211021161113.png]]

常见的ICMP询问报文有哪2种？
- 回送请求和回答
- 时间戳请求和回答


回送请求和回答的作用是？ #card 
测试目的站是否可达
^1634804450859



时间戳请求和回答的ICMP询问报文的作用是？ #card 
用来进行时钟同步和测量时间
^1634804450865

回送请求和回答报文由主机或路由器向特定的目的主机或路由器发出,收到报文的主机或路由器必须要给源主机或路由器发送ICMP==回送回答==报文
^1663477249647




![[Pasted image 20211021161157.png]]

分组网间探测PING使用什么报文？ #card 
ICMP回送请求和回答报文
^1634804450874

分组网间探测PING的作用是？ #card 
用于测试主机或路由器间的连通性
^1634804450879

![[Pasted image 20211021161509.png]]

跟踪路由traceroute使用什么报文？ #card 
ICMP差错报告报文（windows还同时采用ICMP回送请求和回答报文）
^1634804450886

跟踪路由traceroute的作用是？ #card 
用于测试IP数据报从源主机到目的主机经过哪些路由器
^1634804450893

## tracert的基本实现原理
- 中间的路由器,发送ICMP==时间超过差错报告==报文
^1663477249650
- 最后一个站点发送ICMP==回送回答==报文
^1663477249653
